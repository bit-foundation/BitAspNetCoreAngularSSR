<Project Sdk="Microsoft.NET.Sdk.Web">

  <PropertyGroup>
    <TargetFramework>netcoreapp3.0</TargetFramework>
    <TypeScriptCompileBlocked>true</TypeScriptCompileBlocked>
    <TypeScriptToolsVersion>Latest</TypeScriptToolsVersion>
    <SpaRoot>ClientApp\</SpaRoot>
    <BuildServerSideRenderer>true</BuildServerSideRenderer>
    <!-- 
    Disable BuildServerSideRenderer in debug mode is a good idea. Live reload is not working with SSR.    
    ServerSideRenderer works better in production. In development, every route reloads entire page, but in production (publish) it serves initial page to client, then at client side, angular app gets bootstrapped and it continue its work as normal spa angular app.
    -->
    <DefaultItemExcludes>$(DefaultItemExcludes);$(SpaRoot)node_modules\**;$(SpaRoot)dist\**;</DefaultItemExcludes>
    <DefineConstants Condition="'$(BuildServerSideRenderer)' == 'true'">BuildServerSideRenderer</DefineConstants>
  </PropertyGroup>

  <ItemGroup>
    <!-- Don't publish the SPA source files, but do show them in the project files list -->
    <Content Remove="$(SpaRoot)**" />
    <None Remove="$(SpaRoot)**" />
    <None Include="$(SpaRoot)**" Exclude="$(SpaRoot)node_modules\**;$(SpaRoot)dist\**" />
  </ItemGroup>

  <ItemGroup>
    <PackageReference Include="Microsoft.AspNetCore.SpaServices.Extensions" Version="3.0.0-preview8.19405.7" />
  </ItemGroup>

</Project>
